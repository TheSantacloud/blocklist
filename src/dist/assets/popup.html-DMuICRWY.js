(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(o){if(o.ep)return;o.ep=!0;const c=s(o);fetch(o.href,c)}})();let r={};document.addEventListener("DOMContentLoaded",()=>{document.getElementById("searchBox").addEventListener("input",t=>p(t.target.value));const n=document.getElementById("power-button");chrome.storage.sync.get("blockListEnabled",t=>{t.blockListEnabled&&n.classList.add("active")}),n.addEventListener("click",L),document.getElementById("add-button-link").addEventListener("click",()=>{const t=f("",{desc:""});document.getElementById("tableBody").appendChild(t),g(t,!0)}),y(),v(),chrome.storage.sync.get("blockList",t=>{t.blockList&&(r=t.blockList),u(r)})});chrome.storage.onChanged.addListener((e,n)=>{if(n==="sync"&&e.blockListEnabled){const s=document.getElementById("power-button");e.blockListEnabled.newValue?s.classList.add("active"):s.classList.remove("active")}});function f(e,{desc:n}){const s=document.createElement("tr");return s.innerHTML=`
        <td class="url-col"><span>${e}</span></td>
        <td class="desc-col"><span>${n}</span></td>
        <td class="actions">
            <button class="delete-btn"> </button>
        </td>
    `,s.querySelector(".desc-col").addEventListener("dblclick",()=>g(s,!1)),s.querySelector(".delete-btn").addEventListener("click",()=>{s.remove(),delete r[e],h()}),s}function p(e){let n=r;if(e.length>0){let s={};Object.keys(r).forEach(t=>{t.toLowerCase().includes(e)&&(s[t]=r[t])}),Object.keys(s).length>0&&(n=s)}u(n)}function g(e,n){if(!e.classList.toggle("editing")){a(e);return}const t=e.querySelector(".url-col"),o=e.querySelector(".desc-col");if(n)chrome.tabs.query({active:!0,currentWindow:!0},function(c){var l=c[0],d=new URL(l.url).hostname.replace("www.","");t.innerHTML=`<input type="text" value=${d} style="width: 100%; box-sizing: border-box;"/>`,o.innerHTML=`<input type="text" value="${o.children[0].innerText}" style="width: 100%; box-sizing: border-box;"/>`,t.children[0].focus(),t.children[0].select(),t.addEventListener("keydown",i=>{i.key==="Enter"&&o.children[0].focus()}),o.addEventListener("keydown",i=>{i.key==="Enter"&&a(e)})});else{const c=o.children[0];c.style="color: white;",c.contentEditable=!0;const l=window.getSelection(),d=document.createRange();d.setStart(c,0),d.setEnd(c,0),l.removeAllRanges(),l.addRange(d),c.addEventListener("keydown",i=>{i.key==="Enter"&&!i.shiftKey?(i.preventDefault(),a(e)):i.key==="Escape"&&(i.preventDefault(),c.style="",c.contentEditable=!1)}),document.addEventListener("click",i=>{i.target.classList!==c.classList&&(c.style="",c.contentEditable=!1)}),o.focus()}}function a(e){const n=e.querySelector(".url-col"),s=e.querySelector(".desc-col");n&&s&&e.classList.remove("editing");const t=m(n),o=m(s);t&&o&&(t in r?r[t].desc=o:r[t]={desc:o},h())}function m(e){switch(e.children[0].tagName){case"SPAN":return e.children[0].innerText;case"INPUT":return e.children[0].value;default:return console.error(`Row element unknown ${e.children[0].tagName}`),null}}function h(){chrome.storage.sync.set({blockList:r}),u(r)}function u(e){const n=document.getElementById("tableBody");n.innerHTML="";const s=Object.keys(e).sort().reduce((t,o)=>(t[o]=e[o],t),{});for(const[t,o]of Object.entries(s||{})){const c=f(t,o);n.appendChild(c)}}function y(){const e=document.getElementById("instructionsContainer");chrome.commands.getAll(function(n){n.forEach(s=>{const t=document.createElement("li");t.classList.add("instruction");let o=s.description;o&&(t.innerHTML=`<span class="description">${o}</span><span class="shortcut">${s.shortcut}</span>`,e.appendChild(t))})})}function L(){const n=!document.getElementById("power-button").classList.contains("active");b(n)}function b(e){const n=document.getElementById("power-button");e?n.classList.add("active"):n.classList.remove("active");const s=Date.now();chrome.storage.sync.set({blockListEnabled:e,timestamp:s})}function v(){const e=document.getElementById("timedCheckbox"),n=document.getElementById("timeoutInput"),s=document.querySelector(".timedToggleContainer");chrome.storage.sync.get("timeoutValue",t=>{if(t.timeoutValue>0){n.value=t.timeoutValue,n.classList.remove("hidden"),e.checked=!0,s.classList.add("active");return}e.checked=!1,n.classList.add("hidden"),s.classList.remove("active")}),e.addEventListener("change",()=>{e.checked?(n.classList.remove("hidden"),s.classList.add("active"),chrome.storage.sync.set({timeoutValue:n.value?n.value:-1})):(n.classList.add("hidden"),s.classList.remove("active"),chrome.storage.sync.set({timeoutValue:-1}))}),n.addEventListener("change",()=>{let t=n.value;e.checked==!1&&(t=-1),chrome.storage.sync.set({timeoutValue:t})})}
